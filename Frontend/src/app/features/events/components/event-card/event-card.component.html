<mat-card class="h-full flex flex-col">
  <mat-card-header>
    <mat-card-title>{{ event.title }}</mat-card-title>
    <mat-card-subtitle>{{ formatDate(event.dateTime) }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content class="flex-grow">
    <div class="mb-4">
      <p class="line-clamp-3">{{ event.description }}</p>
    </div>

    <div class="flex items-center mb-2">
      <mat-icon class="mr-2">location_on</mat-icon>
      <span>{{ event.location }}</span>
    </div>

    <div class="flex items-center mb-2">
      <mat-icon class="mr-2">group</mat-icon>
      <span>{{ event.registeredVolunteers }}/{{ event.volunteersNeeded }} volunteers</span>
    </div>

    <div class="flex flex-wrap gap-2 mb-4">
      <mat-chip-set>
        <mat-chip *ngFor="let skill of event.requiredSkills">
          {{ skill }}
        </mat-chip>
      </mat-chip-set>
    </div>

    <div class="flex items-center text-sm text-gray-600">
      <mat-icon class="mr-1 text-sm">business</mat-icon>
      <span>{{ event.organizationName }}</span>
    </div>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-button [routerLink]="['/events', event.id]">
      Details
    </button>
    
    <ng-container *ngIf="isVolunteer$ | async">
      <button 
        *ngIf="!event.isRegistered" 
        mat-raised-button 
        color="primary"
        [disabled]="event.status !== EventStatus.PUBLISHED || 
                   event.registeredVolunteers >= event.volunteersNeeded"
        (click)="onRegister()">
        Register
      </button>
      
      <button 
        *ngIf="event.isRegistered" 
        mat-stroked-button 
        color="warn"
        (click)="onCancelRegistration()">
        Cancel Registration
      </button>
    </ng-container>
  </mat-card-actions>

  <mat-card-footer *ngIf="event.status !== EventStatus.PUBLISHED">
    <div [ngClass]="{
      'bg-yellow-100 text-yellow-800': event.status === EventStatus.DRAFT,
      'bg-red-100 text-red-800': event.status === EventStatus.CANCELLED,
      'bg-green-100 text-green-800': event.status === EventStatus.COMPLETED
    }" class="px-4 py-2 text-center text-sm">
      {{ event.status }}
    </div>
  </mat-card-footer>
</mat-card> 